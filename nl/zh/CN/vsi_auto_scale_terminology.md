---

copyright:
  years: 2014, 2019
lastupdated: "2019-05-14"

keywords:

subcollection: virtual-servers

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 自动缩放术语
{: #auto-scale-terminology}

使用以下术语可提高您对自动缩放功能的了解。

* **自动缩放组：**自动缩放组是一组完全相同的服务器，并可选择包含由设置的启动配置所定义的负载均衡器。组可以根据负载扩展和缩减，如您配置的缩放策略所定义，缩放边界由缩放组配置决定。
* **<a name="group_name"></a>组名**：组名在帐户上必须唯一，并且必须定义组名后，才能定义缩放组。可以随时编辑组名。
* **<a name="cooldown"></a>组冷却时间段**：自动缩放组中发生任何状态更改之后的时间段，超过此时间段之后，策略可被视为“活动”并重新启动。冷却时间段是必需的；可以设置为 0，这实际上等于禁用冷却时间段。冷却时间段不能设置为超过 10 天。冷却时间段为自动缩放组提供了复校度量值平均值以反映更改的时间。
  * **自动缩放组冷却时间段**：组变为活动状态之后，可以运行任何策略操作之前必须经过的时间量。
  * **策略冷却时间段**：类似于组冷却时间段，只是它仅覆盖此策略的设置。如果未提供，将使用组冷却时间段值。
* **<a name="member"></a>成员**：组包含成员，这些成员是由组自动缩放的虚拟服务器。
* **<a name="min_virtual_member"></a>最小成员计数**：自动缩放组中允许的最少成员数。用户可以保证具有活动状态的自动缩放组的成员绝不少于设置的数量。如果实际成员数少于当前成员计数，那么将自动创建成员以满足最小值要求。如果自动缩放组上存在 VLAN，但未与计费项目相关联，那么此值必须至少为 1。
* **<a name="max_virtual_member"></a>最大成员计数**：自动缩放组中允许的最多成员数。用户可以保证具有活动状态的自动缩放组的成员绝不多于设置的数量。如果在创建或编辑期间，实际成员数多于当前成员计数，那么将自动除去成员以满足最大值要求。
* **资产**：帐户上绝不会随组缩放，但可以计入度量值收集数量的现有服务器。目前，仅支持虚拟服务器资产。自动缩放组无需具有任何资产。
* **<a name="status"></a>状态**：自动缩放组的状态是根据其成员正在执行的操作以及该组是否已暂挂而派生的值。自动缩放组的状态包括：
  * **缩放**：在尚未供应任何成员或任何成员具有正在运行的活动供应事务时使用。在“缩放”状态下，无法触发自动缩放组进行缩放，并且只能编辑非可操作的属性。
  * **繁忙**：在任何成员具有活动事务，但该事务不是供应或回收事务时使用。在“繁忙”状态下，无法触发自动缩放组进行缩放，并且只能编辑非可操作的属性。
  * **已暂挂**：在成员不处于“缩放”或“繁忙”状态，但已设置为“已暂挂”时使用。在“已暂挂”状态下，无法触发自动缩放组进行缩放；但是，可以编辑任何属性。在用户恢复自动缩放组之前，不会执行因创建或编辑组而要求的任何操作。自动缩放组可以由用户手动暂挂，也可以在缩放自动组时出于任何原因而发生错误的情况下自动暂挂。自动缩放组只能由用户恢复。
  * **活动**：如果自动缩放组不处于“缩放”、“繁忙”或“已暂挂”状态，那么该组即处于“活动”状态。处于“活动”状态时，可以编辑自动缩放组的值，并且可以启动所有触发器。
* **<a name="termination"></a>终止策略**：终止策略是自动缩放组在缩减时选择要除去的成员的方式。有三种策略可供选择：
  * **最新**：将除去最近供应的成员。
  * **最早**：将除去其供应日期最早的成员。
  * **最接近下一次收费**：将除去最接近下一次收费的成员。目前，由于成员是按小时开具发票，因此最接近下一次收费的成员是当前小时中使用分钟数最多的成员。
* **<a name="multi-vlan"></a>多 VLAN 缩放组**：包含供应给多个 VLAN 的服务器的组。除了现有缩放组规则之外，还有专门管理多 VLAN 缩放组的规则：
  * 必须为多 VLAN 缩放组购买所有 VLAN。
  * 不允许在单个路由器上使用多个公用或专用 VLAN。
  * 缩放时会选择成员数最少的 VLAN，并提供其公用和专用对（如有）。
  * 缩放时会选择成员数最少的 VLAN，并提供其公用和专用对（如有）。
* **<a name="balanced term"></a>均衡终止设置**：如果设置了均衡终止标志，那么缩放组将采用在已配置的 VLAN 对之间保持均衡的方式缩减成员。如果不确定要使用哪个成员来保持均衡（例如，两个或更多 VLAN 对上的成员数相同），那么将使用终止策略。如果未设置此标志，那么不管每个 VLAN 上有多少成员，都会使用终止策略。
* **成员模板**：成员模板位于自动缩放组上，并向组“指示”组中虚拟服务器的顺序。使用成员模板时要记住以下事项：
  * 必须提供帐户标识，并且该标识必须与自动缩放组相同。
  * 如果指定了计费，那么必须将计费设置为每小时。
  * 如果提供了数据中心，那么该中心必须位于组所在的区域并且包含组中的 VLAN。
  * 不能将 VLAN 提供给模板。如果用户需要为成员指定 VLAN，那么应该使用自动缩放组的 VLAN。
  * 如果在自动缩放组上设置了任何负载均衡器，那么模板不能为“仅专用网络”。
* **<a name="vlan"></a>VLAN**：用户可以选择提供一组 VLAN 来供应成员服务器。只能为每个路由器提供一对 VLAN。如果为多个路由器提供了多个 VLAN 对，那么缩放系统将确保在路由器之间均匀地添加成员。要了解有关在多个 VLAN 对之间均匀除去成员的更多信息，请参阅“均衡终止设置”。
  * 自动缩放尝试复用路由器后面的公用 VLAN。如果未选择公用 VLAN，并且未指示使用“仅专用 VLAN”，那么将在同一路由器上创建新的公用 VLAN。
  * 如果选择了“公用 VLAN”而未选择“专用 VLAN”，那么自动缩放不会允许创建组。您可能会看到错误：“访客模板无效，错误：仅指定了前端 VLAN。请同时指定后端 VLAN。所有公用 VLAN 都必须具有配对的专用 VLAN，并且均衡终止只能在多 VLAN 均衡的缩放组上启用。”这不适用于“仅专用网络”组。
* **<a name="scalelb"></a>缩放负载均衡器**：组可以包含要在供应完成后应用于成员的负载均衡器设置。用于缩放负载均衡器的选项目前仅适用于本地负载均衡器，并使用某些负载均衡器 API。负载均衡器虚拟 IP 地址必须与自动缩放组位于同一帐户上。负载均衡器还必须位于根据 VLAN、虚拟服务器数据中心和区域确定的有效位置。目前，如果提供了任何负载均衡器，那么虚拟服务器必须提供数据中心。在供应期间，虚拟服务器会自动放置在负载均衡器后面。组成缩放负载均衡器的项包括：
  * **虚拟 IP 地址标识**：要使用的负载均衡器标识。
  * **服务端口**：入局端口。如果存在此端口的现有服务组记录，那么将使用该记录。否则，将使用以下某些信息来创建服务组记录。
  * **分配百分比**：从虚拟 IP 的每秒连接总数池中为虚拟机分配的每秒连接数的百分比。例如，如果虚拟 IP 具有 250 个连接/秒，而该值是 25%，那么该虚拟 IP 上的其他虚拟服务器最多只能分配有 75% 的其他每秒连接数。这不是突增最大值，而是完全从池进行的分配，不管连接使用与否。如果特定端口的虚拟服务器已存在，那么该数字必须与现有分配百分比相匹配。
  * **路由方法**：流量在服务器之间如何路由。如果特定端口的虚拟服务器已存在，那么该数字必须与现有路由方法相匹配。
  * **路由类型**：要在服务器之间执行的路由类型。如果特定端口的虚拟服务器已存在，那么该数字必须与现有路由类型相匹配。
  * **<a name="health_check"></a>运行状况检查**：要在服务器上执行的检查的类型。如果执行 HTTP_CUSTOM 检查，那么可以为 HTTP 方法、URL 和预期响应提供属性。
  * **端口**：运行状况检查期间以及从负载均衡器发送流量时要使用的端口。
* **<a name="policies"></a>策略**：自动缩放组可以具有任意数量的策略。策略包含一组操作和一组触发器。触发器是可选的，如果用户希望手动启动策略的操作，那么可能不会提供触发器。必须仅满足一个触发器，才能启动操作。策略由以下部分组成：
  * **名称**：必须为策略提供名称，并且名称在自动缩放组中必须唯一。
  * **策略冷却时间段**：设置策略冷却时间段是可选的，但是如果提供，它会覆盖组冷却时间段，即在组状态更改后经过多长时间可以开始触发策略。它与组状态更改的源无关，并且在组变为活动状态后可被视为有效。
  * **<a name="actions"></a>操作**：目前唯一的操作类型是缩放操作。只能对活动组启动操作。缩放操作包括以下各项：
    * **数量**：要缩放的成员数。该数量可以为正数或负数，并且值取决于缩放类型。
    * **缩放类型**：有三种缩放类型 - 绝对、相对和百分比：
      * **绝对（在 GUI 中为“精确”）**：绝对缩放将强制自动缩放组缩放为所设置的成员数，而不考虑当前的成员计数。绝对缩放可以包括扩展、缩减或不缩放。数量必须在组的最小和最大范围内。
      * **<a name="relative"></a>相对**：相对缩放会使自动缩放组按特定数量扩展或缩减。但不管数量是多少，系统都将确保自动缩放组缩放后不会低于其最小值或高于其最大值。例如，组的最小值为 5，其当前计数为 7，相对缩放数量为 -4。在调用时，计数会视为如同只有 -2，因为缩放后的数量不能低于 5。
      * **百分比**：百分比缩放使自动缩放组基于正数或负数百分比扩展或缩减。该数字是当前自动缩放组成员计数的百分比。系统会始终忽略小数点后的任何额外百分比。如果百分比缩放数为零，那么会自动将其视为 -1 或 1，具体取决于原始百分比值是正数还是负数。例如，如果一个组有 27 个成员，此数为 12（表示 12%），那么表示扩展 3.24 个成员，四舍五入为 3 个成员。但是，如果该组仅有 2 个成员，那么表示扩展 0.24 个成员，通常会四舍五入为 0，但这里会自动向上舍入，使值至少为 1。
  * **<a name="triggers"></a>触发器**：触发器是有条件触发器，满足条件时触发。有三种类型的触发器：一次性、重复性和基于资源使用量：
    * **一次性**：一次性触发器需要一个日期，并且在自动缩放组处于活动状态时将启动。所有时间都采用 UTC 格式。
    * **<a name="triggers_repeat"></a>重复性**：重复触发器将采用 cron 格式的安排，并在组处于活动状态时，基于该安排触发。
    * **基于资源使用量**：基于资源使用量的触发器具有一组资源监控表。当达到所有资源监控表的值时，即视为满足触发器触发条件。
      * **监控表**：资源监控表是一组参数，用于监控自动缩放组中所有成员和资产中的特定度量值。这些参数如下：
        * **算法**：这是用于组合度量值的算法。唯一支持的算法是指数加权的移动平均值 (EWMA)。
        * **度量值**：度量值基于以下值：
          * **CPU 百分比**：CPU 百分比。
          * **专用网络上的入局网络**：专用虚拟接口上的每秒入局字节数。
          * **专用网络上的出局网络**：专用虚拟接口上的每秒出局字节数。
          * **公用网络上的入局网络**：公共虚拟接口上的每秒入局字节数。
          * **公用网络上的出局网络**：公共虚拟接口上的每秒出局字节数。
        * **运算符**：此值用于检查度量值是低于还是高于特定值。接受的唯一值是字面值大于 (>) 或小于 (<) 字符。
        * **时间段**：将度量值与特定值进行比较时聚集度量值的秒数。度量值聚集启动后，要到其收集时间至少持续了该时间段后才会被视为有效。例如，如果组的冷却时间段为 300 秒，资源监控表用于聚集超过 500 秒的度量值，那么要到超过 800 秒时，才能满足监控表的聚集要求。超过冷却时间段后，度量值才会视为有效。此外，聚集的值在聚集时间段内至少累积了该秒数之后，才会视为有效。时间段不能短于 2 分钟，也不能长于 2 天。
        * **值**：要比较的值。对于 CPU 百分比度量值，此值必须在 5 到 100 之间。对于网络度量值，不得小于 0。
