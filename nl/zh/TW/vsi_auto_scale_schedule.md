---

copyright:
  years: 2014, 2019
lastupdated: "2019-06-07"

keywords:

subcollection: virtual-servers

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 使用排程型自動調整來管理資料流量激增
{: #managing-schedule-based-auto-scaling}

Web 資料流量激增可能是好事，也可能是壞事。就更多人使用您網站的意義而言，激增是好事；由於活動中的突波可能會影響您的回應時間，因而激增就變成壞事。{{site.data.keyword.cloud}} 自動調整可讓您自動擴增或縮減伺服器，以支援您的商業需求。您可以使用排程型自動調整來控制這些資料流量激增。
{:shortdesc}

## 開始之前
首先，導覽至裝置功能表，並確定您具有完成作業所需的正確帳戶許可權。

* 導覽至主控台的裝置功能表。如需相關資訊，請參閱[導覽至裝置](/docs/vsi?topic=virtual-servers-navigating-devices)。
* 確保您具有任何必要的帳戶許可權及裝置存取權。如果您不是帳戶管理者，則您的使用者帳戶必須包含許可權，才能使用自動調整。如需更新許可權以使用自動調整的相關資訊，請參閱[設定使用者許可權進行自動調整](/docs/vsi?topic=virtual-servers-user-permissions-required-to-use-auto-scale)。只有帳戶擁有者或具有**管理使用者**標準基礎架構許可權的使用者才能調整許可權。 

如需許可權的相關資訊，請參閱[傳統基礎架構許可權](/docs/iam?topic=iam-infrapermission#infrapermission)和[管理裝置存取權](/docs/vsi?topic=virtual-servers-managing-device-access)。

## 新增自動調整群組
{: #add-auto-scale-group}

在此情境中，位於德克薩斯州達拉斯的社交網站體驗活動在週末期間流量激增。兩部虛擬伺服器是網站星期一至星期五所需的下限；不過，每個週末需要多加兩部虛擬伺服器，負責處理增加的資料流量。下列步驟將引導您如何設定自動調整以支援排程型調整。

1. 從**裝置**功能表中，選取**自動調整**。
2. 選取**新增自動調整群組**。
3. 首先藉由輸入**群組名稱**（例如，Weekend Scale Up Group）來設定自動調整群組，然後選取資料中心。
4. 選取伺服器終止原則。比方說，如果您選擇**最舊**，則在縮減時會選取佈建日期最早的伺服器。
5. 指出您的群組是否為多重 VLAN 調整群組，以及如何跨已配置的 VLAN 配對平衡縮減。
6. 選取您想要在其上佈建伺服器的公用及專用 VLAN。如果要從公用網際網路存取伺服器（如果 VLAN 正在執行 Web 伺服器），請將**僅限專用網路**保持清除狀態。
7. 將**成員計數下限**設為 2，並將**成員計數上限**設為 4。再將**緩和期間**設為 0。因為這是以排程為基礎的調整，所以沒有收集任何統計資料來觸發調整動作。

## 定義群組的成員配置
{: #define-member-configuration}

1. 找出**成員配置**，並輸入調整伺服器的**主機名稱**及**網域**。新增至群組的後續伺服器則具有附加至主機名稱的唯一字尾。
2. 指定運算實例（核心、RAM 等）的硬體配置。
3. 如果想要安裝最小作業系統，請選取作業系統。您也可以使用公用映像檔或專用映像檔來佈建實例。
4. 如果實例需要額外步驟來安裝其他軟體，請指定後置安裝 script 的 URL 來安裝軟體。（如果您對群組使用負載平衡器，則在成員置於負載平衡器後面之前，會先執行後置安裝 Script）。

## 設定原則
{: #set-up-policies}

在此情境中，社交網站使用以排程為基礎的調整。需要兩個原則：一個用來在星期五下午擴增伺服器，第二個則用來在星期日晚上縮減伺服器。第一個原則是擴增伺服器。

1. 找出**原則**，然後按一下**新增原則**。輸入**原則名稱** (Friday Scale Up)。
2. 選取**緩和期間**的群組緩和選項。
3. 按一下**新增觸發程式**，並在第一個下拉功能表中選取**每隔**來指定重複觸發程式，然後從後續的下拉功能表中選取**星期五**及**下午 10:00**。（**進階編輯**勾選框可讓您在 crontab 之類的表示法中輸入觸發頻率。）
4. 按一下**動作**下的**調整方式**下拉方框，然後選取**相對**。在**成員**欄位中輸入 2。
5. 再次按一下**新增原則**，以指定星期日晚上縮減伺服器的第二個原則。緩和期間與群組的緩和相同。觸發程式是每個星期日上午 1:00，相對調整動作為 -2。
6. 在**觸發程式**欄位中輸入的時間是以 UTC 時間為基礎，這就是您為何需要選取下午 10:00 代表下午 5:00 美國中部夏令時間，以及上午 1:00 代表下午 8:00 美國中部夏令時間的原因。在美國中部標準時間期間，時間將為上午 9:00 與上午 12:00，因為 UTC/GMT 未確認「日光節約時間」。如需時間轉換器，請參閱 [World Time Server ![外部鏈結圖示](../../icons/launch-glyph.svg "外部鏈結圖示")](http://www.worldtimeserver.com/current_time_in_UTC.aspx){: new_window} 網站。

## 新增本端負載平衡器

如果您已設定本端負載平衡器，則可以使用它，對自動調整群組進行負載平衡。

1. 找出**本端負載平衡器**，然後按一下**新增負載平衡器**。
2. 按一下**檢視 VIP 設定**（開啟個別頁面），以查看帳戶中可用的本端負載平衡器，並視需要訂購新的負載平衡器。負載平衡器需要具有相關聯的服務群組，才能與自動調整群組搭配使用。請確定負載平衡器位於自動調整群組的資料中心。
3. 按一下**新增自動調整群組**頁面上的**新增負載平衡器**，按一下「虛擬 IP」的下拉箭頭，然後選取負載平衡器。
4. 按一下**服務群組**、**服務埠**及**服務性能檢查類型**的下拉箭頭，然後選取適當值。
5. 按一下**新增群組**以儲存您的群組。
6. 如果正確指定所有資料中心、網路等等，則會建立自動調整群組。按一下**檢視所有群組**畫面上的群組，以查看您的群組詳細資料。

設定排程型調整的結果是自動佈建兩個成員，以符合網站的最低需求。在星期五下午 5:00 中部時間，當第一個原則觸發程式發動時，會再自動佈建兩個成員。然後，在星期日下午 8:00 中部時間，由於第二個原則觸發程式，會收回兩個成員。如果您指定負載平衡器，則在自訂後置安裝 Script 執行之後，於建立時或在星期五建立的所有成員都會在負載平衡器後面。
