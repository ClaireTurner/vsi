---

copyright:
  years: 2014, 2019
lastupdated: "2019-05-14"

keywords:

subcollection: virtual-servers

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# オート・スケールの用語
{: #auto-scale-terminology}

以下の用語を利用して、オート・スケール機能に関する理解を深めてください。

* **オート・スケール・グループ:** オート・スケール・グループとは、一連の同一サーバーとオプションのロード・バランサーとで構成され、ユーザーがセットアップした起動構成によって定義されます。 グループは、構成されたスケーリング・ポリシーの定義に従い、負荷に応じてスケールアップ/スケールダウンできます。また、スケーリング・グループ構成によって制限されます。
* **<a name="group_name"></a>グループ名:** グループ名は、アカウントで固有でなければならず、スケーリング・グループを定義する前に必要になります。 グループ名はいつでも編集できます。
* **<a name="cooldown"></a>グループ・クールダウン:** オート・スケール・グループの状況が変更されてから、ポリシーが「アクティブ」と見なされて再始動可能になるまでの期間。 クールダウンは必須です。0 に設定できます。0 は実質的にオフです。 10 日間を超えるクールダウンを設定することはできません。 クールダウン期間により、オート・スケール・グループは、メトリックの平均値を修正して変更を反映させる時間を確保できます。
  * **オート・スケール・グループのクールダウン:** グループがアクティブになってからポリシー・アクションが実行可能になるまでに必要な経過時間。
  * **ポリシー・クールダウン:** グループ・クールダウンと同様ですが、その設定をこのポリシーについてのみオーバーライドする点が違います。 指定しない場合は、グループ・クールダウンの値が使用されます。
* **<a name="member"></a>メンバー:** グループにはメンバーが含まれます。メンバーとは、グループによって自動的にスケーリングされる仮想サーバーのことです。
* **<a name="min_virtual_member"></a>最小メンバー数:** オート・スケール・グループで許可されるメンバーの最小数。 ユーザーは、アクティブ状況のオート・スケール・グループのメンバー数が、この設定の数より少なくならないことを保証できます。 実際のメンバー数が現在のメンバー数より少ない場合は、最小値になるまでメンバーが自動的に作成されます。 VLAN がオート・スケール・グループに存在していて、請求項目に関連付けられていない場合は、この値は 1 以上でなければなりません。
* **<a name="max_virtual_member"></a>最大メンバー数:** オート・スケールで許可されるメンバーの最大数。 ユーザーは、アクティブ状況のオート・スケール・グループのメンバー数が、この設定の数より多くならないことを保証できます。 作成時や編集時に、実際のメンバー数が現在のメンバー数より多い場合、この最大値になるまでメンバーが自動的に除去されます。
* **資産:** グループと一緒にスケーリングされることはないが、メトリック収集の数値に加えられる、アカウントの既存のサーバー。 現時点では、仮想サーバー資産のみがサポートされています。 資産はオート・スケール・グループに必須ではありません。
* **<a name="status"></a>状況:** オート・スケール・グループの状況とは、グループ・メンバーの現在の処理内容と、グループが中断されているかどうかによって導き出される値です。 オート・スケール・グループの状況には、以下のものがあります。
  * **スケーリング中 (Scaling):** まだプロビジョンされていないメンバーがある場合や、メンバーのアクティブなプロビジョニング・トランザクションが実行中である場合に使用されます。 スケーリング中の状況では、オート・スケール・グループのスケーリングはトリガーされません。また、実行可能でないプロパティーのみ編集できます。
  * **ビジー:** メンバーにアクティブなトランザクションがあり、そのトランザクションがプロビジョニング・トランザクションでも回収トランザクションでもない場合に使用されます。 ビジーの状況では、オート・スケール・グループのスケーリングはトリガーされません。また、実行可能でないプロパティーのみ編集できます。
  * **中断:** メンバーがスケーリング中でもビジーでもなく、「中断」に設定されている場合に使用されます。 中断の状況では、オート・スケール・グループのスケーリングはトリガーされません。しかし、任意のプロパティーを編集できます。 グループを作成または編集した結果として実行されるアクションは、ユーザーがオート・スケール・グループを再開するまで実行されません。 オート・スケール・グループの中断はユーザーが手動で実行できますが、何らかの理由でオート・グループのスケーリングにエラーが発生した場合に自動で実行されることもあります。 オート・スケール・グループの再開は、ユーザーのみが実行できます。
  * **アクティブ:** スケーリング中でもビジーでも中断でもない場合、オート・スケール・グループはアクティブです。 アクティブの場合、オート・スケール・グループの値は編集できます。また、すべてのトリガーが起動可能です。
* **<a name="termination"></a>終了ポリシー:** 終了ポリシーとは、オート・スケール・グループがスケールダウン時に除去するメンバーを選択する方法のことです。 次の 3 つのポリシーから選択できます。
  * **最新:** 最後にプロビジョンされたメンバーが除去されます。
  * **最古:** プロビジョン日が最も古いメンバーが除去されます。
  * **次回課金が最も近づいている:** 次回課金が最も近づいているメンバーが除去されます。 現在、メンバーの課金は時間単位で行われるので、次回課金が最も近づいているメンバーとは、現行の課金対象時間の中で使用した分数が最も長いメンバーになります。
* **<a name="multi-vlan"></a>マルチ VLAN スケール・グループ:** 複数の VLAN にサーバーをプロビジョンするグループ。 既存のスケール・グループ・ルールに加えて、マルチ VLAN スケール・グループには特別に次のルールが適用されます。
  * マルチ VLAN スケール・グループ用の VLAN はすべて購入する必要があります。
  * 複数のパブリック VLAN またはプライベート VLAN を 1 つのルーターで使用することはできません。
  * スケーリング時にはメンバー数が最も少ない VLAN が選択されます。指定した場合は、パブリックとプライベートのペアが提供されます。
  * スケーリング時にはメンバー数が最も少ない VLAN が選択されます。指定した場合は、パブリックとプライベートのペアが提供されます。
* **<a name="balanced term"></a>バランス型終了の設定:** バランス型終了フラグを設定した場合、スケール・グループは、構成された VLAN ペアの間でバランスを均等に保持しながらメンバーをスケールダウンします。 バランスを保持するために使用すべきメンバーが不明確な場合 (例えば、複数の VLAN ペアに同じ数のメンバーが存在する場合) は、終了ポリシーが使用されます。 このフラグを設定しない場合は、各 VLAN のメンバー数に関係なく、終了ポリシーが使用されます。
* **メンバー・テンプレート:** メンバー・テンプレートはオート・スケール・グループ上にあり、グループ内の仮想サーバーの順序をグループに「知らせる」ものです。 メンバー・テンプレートを使用する場合は次の点に注意してください。
  * オート・スケール・グループと同じアカウント ID を指定する必要があります。
  * 指定する場合は、課金を時間単位に設定する必要があります。
  * データ・センターを指定する場合、そのデータ・センターは同じ地域に存在し、グループの VLAN を含むものでなければなりません。
  * VLAN をテンプレートに指定することはできません。 メンバー用の VLAN を指定する必要があるユーザーは、オート・スケール・グループの VLAN を使用する必要があります。
  * オート・スケール・グループにロード・バランサーをセットアップする場合、テンプレートを「プライベート・ネットワークのみ」にすることはできません。
* **<a name="vlan"></a>VLAN:** ユーザーは、オプションで、メンバー・サーバーのプロビジョニング用に VLAN の集合を指定できます。 ルーターごとに VLAN のペアを 1 つのみ指定できます。 複数のルーターに複数の VLAN ペアを指定すると、スケーリング・システムはメンバーがルーター間に均等に追加されるようにします。 複数の VLAN ペアの間でメンバーを均等に除去する方法について詳しくは、『バランス型終了の設定』を参照してください。
  * オート・スケールは、ルーターの内側のパブリック VLAN を再使用しようとします。 パブリック VLAN を選択しなかった場合、プライベートのみとして指定していなければ、同じルーターに新しいパブリック VLAN が作成されます。
  * パブリック VLAN を選択した場合は、プライベート VLAN も選択しないと、オート・スケールのグループは作成できません。 次のエラーが表示されます。「無効なゲスト・テンプレート、エラー: フロントエンド VLAN のみが指定されました。 バックエンド VLAN も指定してください。 すべてのパブリック VLAN はプライベート VLAN とペアになっていなければなりません。バランス型終了は、マルチ VLAN バランス型スケール・グループでのみ有効です (Invalid guest template, error: Only the frontend VLAN was specified. Please specify the backend VLAN as well. All public VLANs must have a paired private VLAN. Balanced termination can only be enabled on multi-VLAN-balanced scale groups)」 このエラーは、「プライベート・ネットワークのみ」のグループには適用されません。
* **<a name="scalelb"></a>スケール・ロード・バランサー:** プロビジョニングの完了後にメンバーに適用するロード・バランサー設定をグループに指定することができます。 現在、スケール・ロード・バランサーのオプションはローカル・ロード・バランサーにのみ有効です。このオプションにはロード・バランサー API の一部が使用されます。 ロード・バランサーの仮想 IP アドレスは、オート・スケール・グループと同じアカウント上になければなりません。 また、ロード・バランサーは、VLAN、仮想サーバー・データ・センター、地域に基づいて有効な場所になければなりません。 現在、ロード・バランサーを指定する場合は、必ず仮想サーバーにデータ・センターを指定する必要があります。 プロビジョン中に、仮想サーバーは、自動的にロード・バランサーの内側に配置されます。 スケール・ロード・バランサーを構成する項目には、以下のものがあります。
  * **仮想 IP アドレス ID:** 使用するロード・バランサーの ID。
  * **サービス・ポート:** 着信ポート。 既存のサービス・グループ・レコードがこのポートに存在する場合は、そのレコードが使用されます。 存在しない場合は、以下の情報の一部を使用して作成されます。
  * **割り振り率:** 仮想 IP の合計接続数/秒のプールのうち、仮想サーバーに割り振られる接続数/秒の割合。 例えば、仮想 IP の接続数/秒が 250 で、この値が 25% の場合、その仮想 IP の他の仮想サーバーには最大 75% の残りの接続数/秒しか割り振られません。 これは超過可能な最大値ではなく、接続が使用されているかどうかに関係なくプールから割り当てられる純粋な割合です。 特定のポートに仮想サーバーが存在する場合、その数値は既存の割り振り率に一致している必要があります。
  * **転送方式:** サーバー間でトラフィックを転送する方法。 特定のポートに仮想サーバーが存在する場合、その数値は既存の転送方式と一致する必要があります。
  * **転送タイプ:** サーバー間で実行する転送のタイプ。 特定のポートに仮想サーバーが存在する場合、その数値は既存の転送タイプと一致する必要があります。
  * **<a name="health_check"></a>ヘルス・チェック:** サーバーに対して実行する検査のタイプ。 HTTP_CUSTOM 検査の場合、HTTP メソッド、URL、予期される応答に関する属性を指定できます。
  * **ポート:** ヘルス・チェックの実行時や、ロード・バランサーとの間でトラフィックを送受信する際に使用するポート。
* **<a name="policies"></a>ポリシー:** オート・スケール・グループには任意の数のポリシーを指定できます。 ポリシーとは、一連のアクションと一連のトリガーをまとめたものです。 トリガーはオプションです。ポリシーのアクションを手動で開始するユーザーは、トリガーを指定しなくてもかまいません。 トリガーが 1 つでも満たされると、アクションが開始されます。 ポリシーは以下で構成されます。
  * **名前:** ポリシーには名前を指定する必要があり、その名前はオート・スケール・グループ内で固有でなければなりません。
  * **ポリシー・クールダウン:** ポリシー・クールダウンの設定はオプションですが、指定すると、グループの状況が変更された後にポリシーがトリガー可能になるタイミングについてグループ・クールダウンをオーバーライドします。 ポリシーは、グループの状況変更のソースとは関係がなく、グループがアクティブになったらアクティブと見なすことができます。
  * **<a name="actions"></a>アクション:** 現時点では、アクションのタイプはスケール・アクションのみです。 アクションは、アクティブなグループでのみ開始できます。 スケール・アクションには以下のものがあります。
    * **量:** スケーリングするメンバーの数。 正または負の数を指定できます。値はスケール・タイプに応じて異なります。
    * **スケール・タイプ:** 絶対、相対、パーセントの 3 つのスケール・タイプがあります。
      * **絶対 (GUI では「正確」):** 現在のメンバー数に関係なく、オート・スケール・グループをメンバーの設定の数に変更します。 絶対スケーリングは、スケールアップになることも、スケールダウンになることも、変化がないこともあります。 この数は、グループの最小値と最大値の範囲内でなければなりません。
      * **<a name="relative"></a>相対:** 相対スケールを使用すると、特定の量だけオート・スケール・グループがスケールアップ/スケールダウンします。 量に関係なく、オート・スケール・グループが最小値および最大値を超えてスケールアップ/スケールダウンを行わないことはシステムによって保証されています。 例えば、グループの最小値が 5、現在の数が 7、相対スケール量が -4 とします。 5 未満にはスケーリングできないので、実行時にはこの数は -2 として扱われます。
      * **パーセント:** パーセント・スケールを使用すると、正または負のパーセンテージに基づいてオート・スケール・グループがスケールアップ/スケールダウンします。 この数値は、現在のオート・スケール・グループのメンバー数のパーセントです。 小数点以下の余分なパーセントは常に無視されます。 パーセントのスケール量がゼロの場合、元のパーセンテージ値が正であれば 1、負であれば -1 として自動的に扱われます。 例えば、グループに存在するメンバー数が 27 で、この量が 12 (12%) である場合、メンバー数は 3.24 になりますが、これは 3 に丸められます。一方、グループに存在するメンバーが 2 つのみである場合には、メンバー数は 0.24 になり、これは通常は 0 に丸められますが、最低の 1 に自動的に切り上げられます。
  * **<a name="triggers"></a>トリガー:** トリガーとは、満たすことができる条件のことです。 トリガーには、「1 回」、「繰り返し」、「リソース使用量」の 3 つのタイプがあります。
    * **1 回:** 1 回のトリガーは単一の日付を取り、オート・スケール・グループがアクティブな場合に開始します。 時刻はすべて UTC 形式です。
    * **<a name="triggers_repeat"></a>繰り返し:** 繰り返しトリガーは cron 形式のスケジュールを取り、グループがアクティブな場合にそのスケジュールに基づいてトリガーします。
    * **リソース使用量:** リソース使用量トリガーには、一連のリソース監視を設定します。 すべてのリソース監視条件が満たされると、トリガーは満たされたと見なされます。
      * **監視:** リソース監視は、オート・スケール・グループのすべてのメンバーと資産にわたって特定のメトリック値を監視する一式のパラメーターです。 パラメーターには次のものがあります。
        * **アルゴリズム:** 複数のメトリック値を結合するアルゴリズムです。 サポートされるアルゴリズムは、指数加重移動平均 (EWMA) のみです。
        * **メトリック:** メトリックは以下の値に基づきます。
          * **CPU (%):** CPU のパーセンテージ。
          * **プライベート・ネットワークのネットワーク着信:** プライベート仮想インターフェース上の 1 秒あたりの着信バイト数。
          * **プライベート・ネットワークのネットワーク発信:** プライベート仮想インターフェース上の 1 秒あたりの発信バイト数。
          * **パブリック・ネットワークのネットワーク着信:** パブリック仮想インターフェース上の 1 秒あたりの着信バイト数。
          * **パブリック・ネットワークのネットワーク発信:** パブリック仮想インターフェース上の 1 秒あたりの発信バイト数。
        * **演算子:** メトリックが特定の値より上か下かを検査する際に使用する値。指定できる値は、より大 (>) またはより小 (<) のリテラル文字のみです。
        * **期間:** メトリックと特定の値を比較するときにメトリックを集約する秒数。 メトリック集約が開始されると、少なくともこの期間のメトリックの収集が完了するまで有効とは見なされません。 例えば、グループ・クールダウンが 300 秒で、リソース監視が 500 秒間のメトリックを集約する場合は、800 秒経過するまで監視の条件が満たされることはありません。 クールダウンが経過するまでメトリックは無効と見なされます。 集約された値も、少なくとも集約期間の秒数が経過するまでは無効と見なされます。 期間は 2 分以上 2 日未満にする必要があります。
        * **値:** 比較対象の値。 CPU (%) メトリックの場合、5 から 100 までの間でなければなりません。 ネットワーク・メトリックの場合、0 未満にすることはできません。
